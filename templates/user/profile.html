{% load static %}

    <style>
        body {
            background-color: #f8f9fa;
        }
        .profile-card {
            background-color: #fff;
            border-radius: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 2rem;
            margin: 2rem auto;
            max-width: 700px;
        }
        .profile-pic {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #0d6efd;
        }
        .edit-mode input {
            border: 1px solid #0d6efd !important;
            background-color: #eef5ff !important;
        }
    </style>
</head>
<body>


{% include 'partials/header.html' %}

<div class="container">
    <div class="profile-card text-center">
        <h2 class="mb-4 fw-bold text-primary">Mon Profil</h2>

        <form id="profileForm" method="post" enctype="multipart/form-data" action="{% url 'user:update_profile' %}">
            {% csrf_token %}
           
            <div class="mb-3">
                {% if client.photo %}
                <img src="{{ client.photo.url }}" alt="Photo de profil" class="profile-pic mb-3">
                {% else %}
                <i class="fa-solid fa-user-circle fa-2x me-2 text-secondary"></i>
                {% endif %}
                <div>
                    <label class="form-label fw-semibold">Changer la photo :</label>
                    <input type="file" name="photo" class="form-control" disabled>
                </div>
            </div>

            <!-- Informations personnelles -->
            <div class="row text-start">
                <div class="col-md-6 mb-3">
                    <label class="form-label fw-semibold">Nom</label>
                    <input type="text" name="nom" value="{{ client.nom }}" class="form-control" disabled>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label fw-semibold">Prénom</label>
                    <input type="text" name="prenom" value="{{ client.prenom }}" class="form-control" disabled>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label fw-semibold">Email</label>
                    <input type="email" name="email" value="{{ client.email }}" class="form-control" disabled>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label fw-semibold">Téléphone</label>
                    <input type="text" name="tel" value="{{ client.tel }}" class="form-control" disabled>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label fw-semibold">Ville</label>
                    <input type="text" name="ville" value="{{ client.ville }}" class="form-control" disabled>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label fw-semibold">Adresse</label>
                    <input type="text" name="adresse" value="{{ client.adresse }}" class="form-control" disabled>
                </div>
            </div>

            <!-- Boutons -->
            <div class="d-flex justify-content-center mt-4"> 
                <div id="modifyWrapper" class="btn-actions">
                     <button type="button" id="editBtn" class="btn btn-outline-primary fw-bold"> 
                        <i class="fa-solid fa-pen me-2"></i> Modifier </button>
                     </div> 
                     <div id="editActions" class="d-none btn-actions">
                         <button type="submit" id="saveBtn" class="btn btn-primary fw-bold me-2">
                             <i class="fa-solid fa-save me-2"></i> Enregistrer </button>
                              <button type="button" id="cancelBtn" class="btn btn-outline-secondary fw-bold">
                                 <i class="fa-solid fa-xmark me-1"></i> Annuler </button> 
                                </div>
                             </div>
        </form>
    </div>
</div>
{% include 'partials/footer.html' %}
<script>
    const editBtn = document.getElementById("editBtn");
    const editActions = document.getElementById("editActions");
    const cancelBtn = document.getElementById("cancelBtn");
    const form = document.getElementById("profileForm");
    const inputs = form.querySelectorAll("input");

    // Activer le mode édition
    editBtn.addEventListener("click", () => {
        inputs.forEach(input => input.disabled = false);
        form.classList.add("edit-mode");
        editBtn.classList.add("d-none");
        editActions.classList.remove("d-none");
    });

    // Annuler les modifications
    cancelBtn.addEventListener("click", () => {
        inputs.forEach(input => {
            input.disabled = true;
            input.value = input.defaultValue;
        });
        form.classList.remove("edit-mode");
        editActions.classList.add("d-none");
        editBtn.classList.remove("d-none");
    });
</script>


</body>
</html>
